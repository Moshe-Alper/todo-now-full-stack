<div class="group bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-3 transition-all duration-200 hover:shadow-md hover:border-gray-300 dark:hover:border-gray-600" 
     [class.opacity-60]="todo.isCompleted"
     [class.line-through]="todo.isCompleted">
  
  <!-- View Mode -->
  <div class="flex items-center gap-3" *ngIf="!isEditing">
    <!-- Checkbox -->
    <div class="todo-checkbox-custom flex-shrink-0">
      <input 
        type="checkbox" 
        [checked]="todo.isCompleted" 
        (change)="toggleComplete()"
      />
    </div>
    
    <!-- Todo Title -->
    <span class="flex-1 text-gray-900 dark:text-gray-100 text-base font-normal transition-all duration-200"
          [class.text-gray-400]="todo.isCompleted"
          [class.dark:text-gray-500]="todo.isCompleted">
      {{ todo.title }}
    </span>
    
    <!-- Actions (visible on hover) -->
    <div class="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
      <button 
        (click)="startEdit()" 
        class="p-2 text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-all duration-200 text-sm font-medium"
      >
        Edit
      </button>
      <button 
        (click)="deleteTodo()" 
        class="p-2 text-gray-500 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all duration-200"
        title="Delete"
      >
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Edit Mode -->
  <form [formGroup]="editForm" (ngSubmit)="saveEdit()" class="flex items-center gap-3" *ngIf="isEditing">
    <input 
      type="text" 
      formControlName="title" 
      class="flex-1 px-4 py-2 bg-gray-50 dark:bg-gray-700 border-2 border-primary rounded-lg text-gray-900 dark:text-gray-100 
             focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary
             transition-all duration-200 text-base font-normal"
      (keyup.escape)="cancelEdit()"
      autofocus
    />
    <div class="flex gap-2">
      <button 
        type="submit" 
        [disabled]="editForm.invalid" 
        class="px-4 py-2 bg-success hover:bg-green-600 disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed 
               text-white font-medium rounded-lg transition-all duration-200 shadow-sm hover:shadow-md disabled:shadow-none text-sm"
      >
        Save
      </button>
      <button 
        type="button" 
        (click)="cancelEdit()" 
        class="px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 
               text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-all duration-200 text-sm"
      >
        Cancel
      </button>
    </div>
  </form>
</div>
